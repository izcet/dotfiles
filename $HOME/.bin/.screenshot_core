#!/bin/bash


# -- -- -- -- -- -- variables -- -- -- -- -- -- # 
DATE="$(date "+%Y-%b-%d-%a")"
TIME="$(date "+%H:%M:%S")"
PREFIX=""  # for optional future prefix
OUTDIR="${HOME}/Pictures/Screenshots/${DATE}"
FLAG=""  # for optional debug flags
SCREENCAP=xfce4-screenshooter

# -- -- -- -- -- -- err check -- -- -- -- -- -- # 
if [ "$#" -ne "3" ] ; then
    # !exec ?file -flag +pref
    echo "Usage: $0 \"<0|1>\" \"--flags\" <\"\"|prefix>"
    exit 0
fi


# -- -- -- -- -- -- teh logic -- -- -- -- -- -- # 
FLAG="${FLAG} ${2}"

if [ "${1}" -eq "1" ] ; then
    #PREFIX="${PREFIX}${3}"
    #FILE="${TIME}-${PREFIX}.png"

    FLAG="${FLAG} -s ${OUTDIR}"
    
    mkdir -p "${OUTDIR}"
else
    FLAG="${FLAG} -o /usr/bin/gimp"
fi

DEBUG="/tmp/debug-${TIME}.txt"
${SCREENCAP} $FLAG 2>&1 >> "${DEBUG}"
cat "${DEBUG}"
